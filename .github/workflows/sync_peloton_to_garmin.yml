name: üîÑ Sync Peloton to Garmin

on:
  workflow_dispatch:
  schedule:
    - cron: '0 2 * * *'

jobs:
  sync:
    runs-on: ubuntu-latest
    container:
      image: philosowaffle/peloton-to-garmin:console-stable

    env:
      PELOTON_USERNAME: ${{ secrets.PELOTON_USERNAME }}
      PELOTON_PASSWORD: ${{ secrets.PELOTON_PASSWORD }}
      GARMIN_USERNAME: ${{ secrets.GARMIN_USERNAME }}
      GARMIN_PASSWORD: ${{ secrets.GARMIN_PASSWORD }}

    steps:
      - name: üîÅ Run sync
        run: dotnet PelotonToGarmin.Console.dll
